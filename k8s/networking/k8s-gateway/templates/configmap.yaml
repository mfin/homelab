apiVersion: v1
kind: ConfigMap
metadata:
  name: k8s-gateway-config
data:
  Corefile: |-
    .:1053 {
      errors
      log
      health {
        lameduck 5s
      }
      ready
      k8s_gateway {{ .Values.custom.domains }} {
        apex  k8s-gateway.network
        resources Ingress Service
        ttl 300
      }
      prometheus 0.0.0.0:9153
      loop
      reload
      loadbalance
    }
