---
apiVersion: v1
kind: Secret
metadata:
  name: miniflux
type: Opaque
stringData:
  BASE_URL: https://miniflux.devbu.io
  OAUTH2_OIDC_DISCOVERY_ENDPOINT: https://auth.devbu.io
  OAUTH2_REDIRECT_URL: https://miniflux.devbu.io/oauth2/oidc/callback
  ADMIN_USERNAME: "{{ .ADMIN_USERNAME }}"
  ADMIN_PASSWORD: "{{ .ADMIN_PASSWORD }}"
  DATABASE_URL: "postgres://{{ .POSTGRES_USER }}:{{ .POSTGRES_PASS }}@postgres.postgres.svc.cluster.local/miniflux?sslmode=disable"
  OAUTH2_CLIENT_SECRET: "{{ .MINIFLUX_OAUTH_CLIENT_SECRET }}" # from authelia
---
apiVersion: v1
kind: Secret
metadata:
  name: postgres
type: Opaque
stringData:
  INIT_POSTGRES_DBNAME: miniflux
  INIT_POSTGRES_HOST: postgres.postgres.svc.cluster.local
  INIT_POSTGRES_USER: "{{ .POSTGRES_USER }}"
  INIT_POSTGRES_PASS: "{{ .POSTGRES_PASS }}"
  INIT_POSTGRES_SUPER_PASS: "{{ .POSTGRES_SUPER_PASS }}"
